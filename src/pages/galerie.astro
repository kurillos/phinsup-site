---
import Layout from '../layouts/BaseLayout.astro';

const photos = [
  { src: "/images/communaute/1.webp", size: "tall", caption: "Match Day" },
  { src: "/images/communaute/2.webp", size: "wide", caption: "Tailgate" },
  { src: "/images/communaute/3.webp", size: "square", caption: "Fans" },
  { src: "/images/communaute/4.webp", size: "tall", caption: "Stadium" },
  // Ajoute "tall", "wide" ou "square" selon le format de ta photo
];
---

<Layout title="Galerie - The Phin Side">
  <main class="max-w-7xl mx-auto py-12 px-6">
    
    <div class="grid-masonry">
      {photos.map(photo => (
        <div class={`gallery-item ${photo.size} group relative overflow-hidden rounded-2xl shadow-lg`}>
          <img 
            src={photo.src} 
            alt={photo.caption} 
            class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity p-4 flex items-end">
            <span class="text-white font-[Oswald] italic uppercase">{photo.caption}</span>
          </div>
        </div>
      ))}
    </div>

  </main>
</Layout>

<style>
  /* Le système de grille intelligente */
  .grid-masonry {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    grid-auto-rows: 200px; /* Hauteur de base d'une unité */
    grid-auto-flow: dense; /* C'est ICI que la magie opère pour combler les blancs */
    gap: 16px;
  }

  /* Gestion des formats pour combler les espaces */
  .gallery-item.square {
    grid-row: span 1;
    grid-column: span 1;
  }

  .gallery-item.tall {
    grid-row: span 2; /* Prend 2 unités de hauteur */
  }

  .gallery-item.wide {
    grid-column: span 2; /* Prend 2 unités de largeur */
  }

  @media (max-width: 640px) {
    .gallery-item.wide {
      grid-column: span 1; /* On repasse en 1 col sur mobile */
    }
  }
</style>